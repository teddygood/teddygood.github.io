---
title: "WSL2ì—ì„œ do-release-upgrade ì¤‘ snapd.socket ì—ëŸ¬ í•´ê²°"
date: '2026-02-14'
draft: false
---

## ğŸ¤” ë¬¸ì œ

WSL2 Ubuntuì—ì„œ `sudo do-release-upgrade`ë¥¼ ì‹¤í–‰í–ˆëŠ”ë° ì´ˆë°˜ì— ë°”ë¡œ ì¤‘ë‹¨ëë‹¤.

```bash
error: cannot list snaps: cannot communicate with server:
Get "http://localhost/v2/snaps": dial unix /run/snapd.socket: connect: no such file or directory
...
subprocess.CalledProcessError: Command '['snap', 'list']' returned non-zero exit status 1.
```

ì²˜ìŒì—ëŠ” "WSL2ì¸ë° ì™œ snapì´ ì•ˆ ë˜ì§€?"ë¼ê³  ìƒê°í–ˆëŠ”ë°, ê²°ë¡ ì ìœ¼ë¡œëŠ” **WSL2 ìì²´ ë¬¸ì œê°€ ì•„ë‹ˆë¼ systemdê°€ êº¼ì ¸ ìˆì–´ì„œ snapdê°€ ëª» ëœ¬ ìƒíƒœ**ì˜€ë‹¤.

## ğŸš© í•´ê²°

### 1) systemd í™œì„±í™”

`/etc/wsl.conf` íŒŒì¼ì— ì•„ë˜ ë‚´ìš©ì„ ë„£ëŠ”ë‹¤.

```ini
[boot]
systemd=true
```

### 2) WSL ì™„ì „ ì¬ì‹œì‘

ë¦¬ëˆ…ìŠ¤ ì‰˜ì´ ì•„ë‹ˆë¼ **Windows í„°ë¯¸ë„(PowerShell/cmd)**ì—ì„œ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤.

```powershell
wsl --shutdown
```

ê·¸ ë‹¤ìŒ Ubuntuë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.

### 3) ìƒíƒœ í™•ì¸

ì•„ë˜ ë‘ ê°€ì§€ê°€ í†µê³¼í•´ì•¼ í•œë‹¤.

```bash
ps -p 1 -o comm=
snap list
```

- ì²« ë²ˆì§¸ ëª…ë ¹ ê²°ê³¼ê°€ `systemd`ì—¬ì•¼ í•¨
- ë‘ ë²ˆì§¸ ëª…ë ¹ì´ ì†Œì¼“ ì—ëŸ¬ ì—†ì´ ë°˜í™˜ë¼ì•¼ í•¨

### 4) ì—…ê·¸ë ˆì´ë“œ ì „ ì •ë¦¬

```bash
sudo apt update
sudo apt full-upgrade -y
sudo apt autoremove -y
```

### 5) ë¦´ë¦¬ì¦ˆ ì—…ê·¸ë ˆì´ë“œ ì‹¤í–‰

```bash
sudo do-release-upgrade
```

## âš ï¸ ì‚½ì§ˆ í¬ì¸íŠ¸

ì˜ˆì „ ì´ìŠˆë¥¼ ë³´ë©´ `genie`, `unshare/nsenter`, upgrader íŒŒì´ì¬ ì„ì‹œ íŒŒì¼ ìˆ˜ì • ê°™ì€ ìš°íšŒ ë°©ë²•ì´ ë§ì´ ë‚˜ì˜¤ëŠ”ë°,
ìš”ì¦˜ì—ëŠ” ì´ëŸ° ë°©ì‹ë³´ë‹¤ **systemdë¥¼ ì •ì‹ìœ¼ë¡œ ì¼œëŠ” ë°©ì‹ì´ í›¨ì”¬ ì•ˆì „**í•˜ë‹¤.

íŠ¹íˆ ì„ì‹œ í•´í‚¹ì€ ë‹¤ìŒ ë¬¸ì œê°€ ìˆì—ˆë‹¤.

- ì„¸ì…˜/ì¬ë¶€íŒ…ë§ˆë‹¤ ë‹¤ì‹œ í•´ì•¼ í•˜ëŠ” ê²½ìš°
- ì—…ê·¸ë ˆì´ë“œëŠ” ì§€ë‚˜ê°€ë„ ì´í›„ `apt` ìƒíƒœê°€ ê¼¬ì´ëŠ” ê²½ìš°
- ë°°í¬íŒì´ ê¹¨ì¡Œë‹¤ëŠ” ì‚¬ë¡€

ì¦‰, ì§€ê¸ˆ ê¸°ì¤€ìœ¼ë¡œëŠ” "í•´í‚¹ìœ¼ë¡œ í†µê³¼"ë³´ë‹¤ "í™˜ê²½ì„ ì •ìƒ ìƒíƒœë¡œ ë§ì¶˜ ë’¤ ì—…ê·¸ë ˆì´ë“œ"ê°€ ì •ë‹µì— ê°€ê¹ë‹¤.

## âœ… ìš”ì•½

ì´ë²ˆ ì¼€ì´ìŠ¤ëŠ” `do-release-upgrade` ë²„ê·¸ë¼ê¸°ë³´ë‹¤, ì—…ê·¸ë ˆì´ë”ê°€ í˜¸ì¶œí•œ `snap list`ê°€ ì‹¤íŒ¨í•œ ìƒí™©ì´ì—ˆë‹¤.
í•µì‹¬ì€ `snapd.socket`ì„ ì‚´ë¦¬ëŠ” ê²ƒì´ê³ , ê·¸ ì „ì œ ì¡°ê±´ì´ `systemd=true + wsl --shutdown`ì´ë‹¤.

## ğŸŒ References

- [Use systemd to manage Linux services with WSL](https://learn.microsoft.com/en-us/windows/wsl/systemd)
- [[WSL1] Upgrade to Ubuntu 24.04 from 22.04 fails with missing snap. Possible to work around?](https://github.com/microsoft/WSL/issues/11982)
- [`do-release-upgrade` when systemd is disabled.](https://github.com/ubuntu/WSL/issues/493)
- [WSL2- Ubuntu 20.04 Snap store doesn't work due to systemd dependency](https://github.com/microsoft/WSL/issues/5126)
