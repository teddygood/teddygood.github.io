"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[7161],{28453:(s,e,n)=>{n.d(e,{R:()=>r,x:()=>t});var i=n(96540);const a={},l=i.createContext(a);function r(s){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function t(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(a):s.components||a:r(s.components),i.createElement(l.Provider,{value:e},s.children)}},62792:s=>{s.exports=JSON.parse('{"permalink":"/en/projects/optiver-kaggle","source":"@site/i18n/en/docusaurus-plugin-content-blog-projects/optiver-kaggle.md","title":"Optiver \\"Trading at the Close\\" Competition Retrospective","description":"Kaggle Optiver - Trading at the Close Retrospective (Bronze Medal, Top 30%)","date":"2026-01-30T02:24:42.000Z","tags":[],"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Optiver \\"Trading at the Close\\" Competition Retrospective","description":"Kaggle Optiver - Trading at the Close Retrospective (Bronze Medal, Top 30%)","role":"Data Scientist","timeline":"Oct 2023 - Dec 2023","stack":["Python","LightGBM","Numba","Pandas"],"category":"Kaggle Competition","image":"/img/projects/optiver-kaggle-header.png","hide_table_of_contents":true},"unlisted":false,"nextItem":{"title":"Serverless Code Review Assistant on AWS","permalink":"/en/projects/serverless-code-review"}}')},76492:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var i=n(62792),a=n(74848),l=n(28453);const r={title:'Optiver "Trading at the Close" Competition Retrospective',description:"Kaggle Optiver - Trading at the Close Retrospective (Bronze Medal, Top 30%)",role:"Data Scientist",timeline:"Oct 2023 - Dec 2023",stack:["Python","LightGBM","Numba","Pandas"],category:"Kaggle Competition",image:"/img/projects/optiver-kaggle-header.png",hide_table_of_contents:!0},t='Optiver "Trading at the Close" Competition Retrospective',c={authorsImageUrls:[]},d=[{value:"Motivation",id:"motivation",level:2},{value:"Competition Overview",id:"competition-overview",level:2},{value:"Optiver and Closing Auctions",id:"optiver-and-closing-auctions",level:3},{value:"Schedule and Prize",id:"schedule-and-prize",level:3},{value:"Problem Definition",id:"problem-definition",level:3},{value:"Target Definition",id:"target-definition",level:3},{value:"Evaluation Metric",id:"evaluation-metric",level:3},{value:"Data Structure",id:"data-structure",level:3},{value:"My Approach",id:"my-approach",level:2},{value:"Feature Engineering",id:"feature-engineering",level:3},{value:"Model and Training",id:"model-and-training",level:3},{value:"Inference",id:"inference",level:3},{value:"Results",id:"results",level:2},{value:"Comparison with Top Solutions",id:"comparison-with-top-solutions",level:2},{value:"1st Place \u2013 HYD (hydantess)",id:"1st-place--hyd-hydantess",level:3},{value:"9th Place \u2013 ADAM. (hookman)",id:"9th-place--adam-hookman",level:3},{value:"14th Place \u2013 Clash Royale (5-person team)",id:"14th-place--clash-royale-5-person-team",level:3},{value:"15th Place \u2013 O Yuksel (lognorm)",id:"15th-place--o-yuksel-lognorm",level:3},{value:"Common Themes and What I Missed",id:"common-themes-and-what-i-missed",level:3},{value:"Retrospective",id:"retrospective",level:2},{value:"What Went Well",id:"what-went-well",level:3},{value:"What Could Be Improved",id:"what-could-be-improved",level:3},{value:"References",id:"references",level:2}];function m(s){const e={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",munderover:"munderover",p:"p",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...s.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"motivation",children:"Motivation"}),"\n",(0,a.jsxs)(e.p,{children:['In 2023, while participating in the 4th cohort of the Google ML Bootcamp, one of the completion requirements was to participate in a Kaggle competition. Coincidentally, Optiver was hosting a competition called "Trading at the Close," and I chose it because the domain of closing auctions was unfamiliar but intriguing. My final submission is a LightGBM-based pipeline documented in ',(0,a.jsx)(e.code,{children:"my-submission.ipynb"}),"."]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"competition-overview",children:"Competition Overview"}),"\n",(0,a.jsx)(e.h3,{id:"optiver-and-closing-auctions",children:"Optiver and Closing Auctions"}),"\n",(0,a.jsx)(e.p,{children:"Optiver is a global electronic market maker. They provide liquidity to major exchanges worldwide while trading derivatives, equities, ETFs, bonds, and foreign exchange."}),"\n",(0,a.jsxs)(e.p,{children:["The ",(0,a.jsx)(e.strong,{children:"Nasdaq Closing Cross"})," takes place daily during the last 10 minutes of the market (3:50\u20134:00 PM ET), during which the official closing price for the day is determined. It is a complex period where investors adjust positions, leading to high volatility, and requires simultaneous processing of traditional order book data and auction data."]}),"\n",(0,a.jsx)(e.h3,{id:"schedule-and-prize",children:"Schedule and Prize"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Start"}),": September 20, 2023"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Final Submission"}),": December 20, 2023"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Forecasting Period"}),": December 20, 2023 \u2013 March 20, 2024 (Evaluated on real-time market data)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Total Prize"}),": ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"100"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"000"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"c"}),(0,a.jsx)(e.mi,{children:"e"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"100,000 (1st Place "})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"100"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"000"}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"tPl"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"ce"})]})})]}),"25,000)"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["Unlike typical Kaggle competitions, this was a ",(0,a.jsx)(e.strong,{children:"forecasting competition"})," where models were evaluated on actual market data for about 3 months after submission. The leaderboard was updated every two weeks, and the previous day's answers were released daily via ",(0,a.jsx)(e.code,{children:"revealed_targets"}),"."]}),"\n",(0,a.jsx)(e.h3,{id:"problem-definition",children:"Problem Definition"}),"\n",(0,a.jsx)(e.p,{children:"The task was to predict price movements 60 seconds into the future during the closing auction period."}),"\n",(0,a.jsx)(e.h3,{id:"target-definition",children:"Target Definition"}),"\n",(0,a.jsx)(e.p,{children:"The target is the change in the WAP (Weighted Average Price) of an individual stock minus the change in the Index WAP, expressed in basis points (bp, 0.01%):"}),"\n",(0,a.jsx)(e.span,{className:"katex-display",children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"T"}),(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"g"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{fence:"true",children:"("}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"c"}),(0,a.jsx)(e.mi,{children:"k"}),(0,a.jsx)(e.mi,{children:"W"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"60"})]})]})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"c"}),(0,a.jsx)(e.mi,{children:"k"}),(0,a.jsx)(e.mi,{children:"W"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsx)(e.mi,{children:"t"})]})]})]}),(0,a.jsx)(e.mo,{children:"\u2212"}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"I"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mi,{children:"W"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"60"})]})]})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"I"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mi,{children:"W"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsx)(e.mi,{children:"t"})]})]})]}),(0,a.jsx)(e.mo,{fence:"true",children:")"})]}),(0,a.jsx)(e.mo,{children:"\xd7"}),(0,a.jsx)(e.mn,{children:"10000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"Target = \\left( \\frac{StockWAP_{t+60}}{StockWAP_t} - \\frac{IndexWAP_{t+60}}{IndexWAP_t} \\right) \\times 10000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),(0,a.jsxs)(e.span,{className:"minner",children:[(0,a.jsx)(e.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size3",children:"("})}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"St"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"oc"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"kW"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"St"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"oc"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"kW"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(e.span,{className:"mbin mtight",children:"+"}),(0,a.jsx)(e.span,{className:"mord mtight",children:"60"})]})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.836em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2806em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(e.span,{className:"mbin mtight",children:"+"}),(0,a.jsx)(e.span,{className:"mord mtight",children:"60"})]})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.2083em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.836em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(e.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,a.jsx)(e.span,{className:"delimsizing size3",children:")"})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"10000"})]})]})]})}),"\n",(0,a.jsx)(e.p,{children:'In other words, it is a problem of predicting the "relative" price change of an individual stock with the overall market movement removed.'}),"\n",(0,a.jsx)(e.h3,{id:"evaluation-metric",children:"Evaluation Metric"}),"\n",(0,a.jsx)(e.p,{children:"Mean Absolute Error (MAE):"}),"\n",(0,a.jsx)(e.span,{className:"katex-display",children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"M"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mi,{children:"E"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mi,{children:"n"})]}),(0,a.jsxs)(e.munderover,{children:[(0,a.jsx)(e.mo,{children:"\u2211"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mi,{children:"n"})]}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mo,{children:"\u2212"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"\u2223"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"MAE = \\frac{1}{n} \\sum_{i=1}^{n} |y_i - x_i|"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"E"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"2.9291em",verticalAlign:"-1.2777em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord",children:(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"mord",children:(0,a.jsx)(e.span,{className:"mord",children:"1"})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.686em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mop op-limits",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.6514em"},children:[(0,a.jsxs)(e.span,{style:{top:"-1.8723em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{children:(0,a.jsx)(e.span,{className:"mop op-symbol large-op",children:"\u2211"})})]}),(0,a.jsxs)(e.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"})})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"1.2777em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"\u2223"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mord",children:"\u2223"})]})]})]})}),"\n",(0,a.jsx)(e.h3,{id:"data-structure",children:"Data Structure"}),"\n",(0,a.jsx)(e.p,{children:"The training data consists of closing auction snapshots for about 200 stocks over 481 days, totaling about 5 million rows. Key columns are as follows:"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Column"}),(0,a.jsx)(e.th,{children:"Description"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"stock_id"})}),(0,a.jsx)(e.td,{children:"Stock unique identifier"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"date_id"})}),(0,a.jsx)(e.td,{children:"Date identifier (sequential)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"seconds_in_bucket"})}),(0,a.jsx)(e.td,{children:"Seconds elapsed since auction start"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"imbalance_size"})}),(0,a.jsx)(e.td,{children:"Unmatched volume at current reference_price (USD)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"imbalance_buy_sell_flag"})}),(0,a.jsx)(e.td,{children:"Imbalance direction: 1 (Buy side), -1 (Sell side), 0 (None)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"reference_price"})}),(0,a.jsx)(e.td,{children:"Price where matched volume is maximized"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"matched_size"})}),(0,a.jsx)(e.td,{children:"Volume matchable at current reference_price (USD)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.code,{children:"far_price"})," / ",(0,a.jsx)(e.code,{children:"near_price"})]}),(0,a.jsx)(e.td,{children:"Optimal execution price (Auction only / Including continuous orders)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.code,{children:"bid_price"})," / ",(0,a.jsx)(e.code,{children:"ask_price"})]}),(0,a.jsx)(e.td,{children:"Best bid/ask price in non-auction order book"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.code,{children:"bid_size"})," / ",(0,a.jsx)(e.code,{children:"ask_size"})]}),(0,a.jsx)(e.td,{children:"Volume of best bid/ask (USD)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.code,{children:"wap"})}),(0,a.jsxs)(e.td,{children:["Weighted average price of non-auction order book: ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"B"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsx)(e.mo,{children:"\xd7"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"k"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"k"}),(0,a.jsx)(e.mi,{children:"P"}),(0,a.jsx)(e.mo,{children:"\xd7"}),(0,a.jsx)(e.mi,{children:"B"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"B"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mi,{children:"A"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"k"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(BidP \\times AskS + AskP \\times BidS) / (BidS + AskS)"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mord",children:"/"}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})]})]})]})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"my-approach",children:"My Approach"}),"\n",(0,a.jsx)(e.h3,{id:"feature-engineering",children:"Feature Engineering"}),"\n",(0,a.jsxs)(e.p,{children:["I used a total of 124 features in ",(0,a.jsx)(e.code,{children:"my-submission.ipynb"}),". They can be broadly categorized into five groups:"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"1. Liquidity/Imbalance Features"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"liquidity_imbalance"}),": Order volume imbalance \u2192 ",(0,a.jsx)(e.code,{children:"(bid_size - ask_size) / (bid_size + ask_size)"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"matched_imbalance"}),": Matched/Imbalance volume ratio \u2192 ",(0,a.jsx)(e.code,{children:"(imbalance_size - matched_size) / (imbalance_size + matched_size)"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"size_imbalance"}),": Simple ratio \u2192 ",(0,a.jsx)(e.code,{children:"bid_size / ask_size"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"imbalance_momentum"}),": Time change of ",(0,a.jsx)(e.code,{children:"imbalance_size"})," per stock divided by ",(0,a.jsx)(e.code,{children:"matched_size"})]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"2. Price Spread Features"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"price_spread"}),": ",(0,a.jsx)(e.code,{children:"ask_price - bid_price"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"spread_intensity"}),": Change in spread per stock"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"price_pressure"}),": ",(0,a.jsx)(e.code,{children:"imbalance_size * price_spread"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"market_urgency"}),": ",(0,a.jsx)(e.code,{children:"price_spread * liquidity_imbalance"})]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"3. Price Pair/Triplet Ratio Features"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Imbalance ratios for all pair combinations of 6 prices (",(0,a.jsx)(e.code,{children:"reference_price"}),", ",(0,a.jsx)(e.code,{children:"far_price"}),", ",(0,a.jsx)(e.code,{children:"near_price"}),", ",(0,a.jsx)(e.code,{children:"ask_price"}),", ",(0,a.jsx)(e.code,{children:"bid_price"}),", ",(0,a.jsx)(e.code,{children:"wap"}),") \u2192 ",(0,a.jsx)(e.code,{children:"(P1 - P2) / (P1 + P2)"})," form"]}),"\n",(0,a.jsx)(e.li,{children:"Numba-accelerated triplet imbalance: (max - mid) / (mid - min) ratio of three prices"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"4. Time Series Features"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["1/2/3/10 lags and pct_change for ",(0,a.jsx)(e.code,{children:"matched_size"}),", ",(0,a.jsx)(e.code,{children:"imbalance_size"}),", ",(0,a.jsx)(e.code,{children:"reference_price"}),", ",(0,a.jsx)(e.code,{children:"imbalance_buy_sell_flag"})]}),"\n",(0,a.jsxs)(e.li,{children:["1/2/3/10 diffs for ",(0,a.jsx)(e.code,{children:"ask_price"}),", ",(0,a.jsx)(e.code,{children:"bid_price"}),", ",(0,a.jsx)(e.code,{children:"ask_size"}),", ",(0,a.jsx)(e.code,{children:"bid_size"}),", ",(0,a.jsx)(e.code,{children:"market_urgency"}),", ",(0,a.jsx)(e.code,{children:"imbalance_momentum"}),", ",(0,a.jsx)(e.code,{children:"size_imbalance"})]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"5. Global Statistics Features"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Median, std, ptp (peak-to-peak) of ",(0,a.jsx)(e.code,{children:"bid_size"}),", ",(0,a.jsx)(e.code,{children:"ask_size"}),", ",(0,a.jsx)(e.code,{children:"bid_price"}),", ",(0,a.jsx)(e.code,{children:"ask_price"})," per stock mapped to ",(0,a.jsx)(e.code,{children:"global_*"})]}),"\n",(0,a.jsxs)(e.li,{children:["Time derivatives: ",(0,a.jsx)(e.code,{children:"dow"})," (day of week), ",(0,a.jsx)(e.code,{children:"seconds"}),", ",(0,a.jsx)(e.code,{children:"minute"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"model-and-training",children:"Model and Training"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model"}),": LightGBM (",(0,a.jsx)(e.code,{children:"objective='mae'"}),", ",(0,a.jsx)(e.strong,{children:"Tesla P100 GPU"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Hyperparameters"}),": n_estimators=6000, num_leaves=256, max_depth=11, learning_rate=0.00871, subsample=0.6, colsample_bytree=0.8"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Validation"}),": Date-based 5-fold CV, with a 5-day purge gap between folds (to prevent time leakage)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Final Training"}),": Retrained on full data using the average best_iteration (approx. 5103) of the 5 folds"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"inference",children:"Inference"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Mantained a rolling cache of the last 21 rows per stock to generate features"}),"\n",(0,a.jsx)(e.li,{children:"Equal-weight ensemble of 5 fold models"}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"zero_sum"})," post-processing: Subtract weighted average from predictions using ",(0,a.jsx)(e.strong,{children:"square root of volume (bid+ask size)"})," as weights. This ensures the market-wide sum is zero."]}),"\n",(0,a.jsx)(e.li,{children:"Clipping: Limited to [-64, 64] range"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"results",children:"Results"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Item"}),(0,a.jsx)(e.th,{children:"Value"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"5-fold CV MAE"}),(0,a.jsx)(e.td,{children:"5.83 (Per fold: 6.75, 6.12, 5.97, 5.49, 4.80)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Public/Private LB"}),(0,a.jsx)(e.td,{children:"5.4744"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Rank"}),(0,a.jsx)(e.td,{children:"981st / 3,225 Teams (Top 30%)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Runtime"}),(0,a.jsx)(e.td,{children:"2h 35m (P100 GPU)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"Inference Speed"}),(0,a.jsx)(e.td,{children:"~0.34s per batch"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"comparison-with-top-solutions",children:"Comparison with Top Solutions"}),"\n",(0,a.jsx)(e.p,{children:"After the competition, I reviewed top solutions to see what I missed."}),"\n",(0,a.jsx)(e.h3,{id:"1st-place--hyd-hydantess",children:"1st Place \u2013 HYD (hydantess)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model"}),": CatBoost(50%) + GRU(30%) + Transformer(20%) Ensemble"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Features"}),": GRU captured 55-step time-series patterns, Transformer captured cross-sectional relationships among 200 stocks"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Online Learning"}),": Retrained every 12 days (Total 4 times)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Weighted zero_sum"}),": ",(0,a.jsx)(e.code,{children:"pred -= (pred * stock_weights).sum() / stock_weights.sum()"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Sample Weights"}),": Normalized per-stock volatility with ",(0,a.jsx)(e.code,{children:"1.0 / (stock_std + 1e-7)"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"9th-place--adam-hookman",children:"9th Place \u2013 ADAM. (hookman)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model"}),": 3\xd7 XGBoost (different seeds)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Features"}),": 157 features, median-scaled volume, MACD, WAP-based target proxy"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Data Weights"}),": 1.5x weight on last 45 days"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Online Learning"}),": Retrained on Day N and Day N+30"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"14th-place--clash-royale-5-person-team",children:"14th Place \u2013 Clash Royale (5-person team)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model"}),": LightGBM + CatBoost simple average"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Features"}),": 193 features, revealed target lags, RSI/MACD/Bollinger Bands"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Online Learning"}),": Alternating LGB/CAT retraining every 6-9 days"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Key Fix"}),": Fixed leakage in ",(0,a.jsx)(e.code,{children:"mid_price_movement"})," calculation by grouping by ",(0,a.jsx)(e.code,{children:"stock_id"})]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"15th-place--o-yuksel-lognorm",children:"15th Place \u2013 O Yuksel (lognorm)"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model"}),": 3\xd7 LGB (Offline) + 4\xd7 XGB + 1\xd7 LGB (Online)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Features"}),": Revealed target, relative performance vs. market/sector, behavior-based embeddings instead of stock_id"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Post-processing"}),": Subtracted index-weighted mean instead of simple zero-sum"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"common-themes-and-what-i-missed",children:"Common Themes and What I Missed"}),"\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"Top Solution Feature"}),(0,a.jsx)(e.th,{children:"My Solution"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.strong,{children:"Online Learning"})," (Retrain every 6~30 days)"]}),(0,a.jsx)(e.td,{children:"Trained once and fixed"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.strong,{children:"Multi-Model Ensemble"})," (LGB+CAT+XGB or +GRU/Transformer)"]}),(0,a.jsx)(e.td,{children:"LightGBM Single"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.strong,{children:"Per-Stock Scaling"})," (stock_std, median)"]}),(0,a.jsx)(e.td,{children:"used Global statistics only"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Weighted zero_sum"})}),(0,a.jsx)(e.td,{children:"Used simple volume sqrt weights"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:(0,a.jsx)(e.strong,{children:"Revealed Target Features"})}),(0,a.jsx)(e.td,{children:"Not used"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsxs)(e.td,{children:[(0,a.jsx)(e.strong,{children:"Seed Diversity"})," (3+ same models)"]}),(0,a.jsx)(e.td,{children:"5-fold ensemble only"})]})]})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"retrospective",children:"Retrospective"}),"\n",(0,a.jsx)(e.h3,{id:"what-went-well",children:"What Went Well"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Accelerated triplet imbalance calculation with Numba to reduce feature generation time"}),"\n",(0,a.jsx)(e.li,{children:"Prevented time leakage with date-based purge gap"}),"\n",(0,a.jsx)(e.li,{children:"Ran stably in Kaggle environment thanks to memory downcasting"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"what-could-be-improved",children:"What Could Be Improved"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Did not use Online Learning."})," The competition API provided the ",(0,a.jsxs)(e.strong,{children:["previous day's target (",(0,a.jsx)(e.code,{children:"revealed_targets"}),")"]})," at the start of each day. Top rankers did not discard this data but periodically retrained models to reflect the latest market trends. I trained the model once and left it for 3 months, failing to adapt to drift."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Did not use Sequence Models."})," The 1st place solution used GRU for temporal order and Transformer for cross-stock relationships. Tree models alone likely struggled to capture these structural patterns."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Lack of Per-Stock Normalization."})," Scaling by stock_std or median could have corrected for volatility differences between stocks."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Persistence:"})," Since this project was for completing the Google ML Bootcamp, I didn't persist until the very end of the competition. I wonder if I could have gotten a higher score if I had put in a bit more effort."]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"references",children:"References"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/hyd-1st-place-solution",children:"1st place \u2013 HYD"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/adam-9th-place-solution",children:"9th place \u2013 ADAM."})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/clash-royale-14th-place-solution-for-the-optiver-t",children:"14th place \u2013 Clash Royale"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/o-yuksel-15th-place-solution",children:"15th place \u2013 O Yuksel"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.kaggle.com/competitions/optiver-trading-at-the-close/data",children:"Kaggle Data Page"})}),"\n"]})]})}function h(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,a.jsx)(e,{...s,children:(0,a.jsx)(m,{...s})}):m(s)}}}]);