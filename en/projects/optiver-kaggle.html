<!doctype html>
<html lang="en" dir="ltr" class="plugin-blog plugin-id-projects" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Optiver &quot;Trading at the Close&quot; Competition Retrospective @ Chanho Lee</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://teddygood.github.io/en/projects/optiver-kaggle"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Optiver &quot;Trading at the Close&quot; Competition Retrospective @ Chanho Lee"><meta data-rh="true" name="description" content="Kaggle Optiver - Trading at the Close Retrospective (Bronze Medal, Top 30%)"><meta data-rh="true" property="og:description" content="Kaggle Optiver - Trading at the Close Retrospective (Bronze Medal, Top 30%)"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://teddygood.github.io/en/projects/optiver-kaggle"><link data-rh="true" rel="alternate" href="https://teddygood.github.io/projects/optiver-kaggle" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://teddygood.github.io/en/projects/optiver-kaggle" hreflang="en"><link data-rh="true" rel="alternate" href="https://teddygood.github.io/projects/optiver-kaggle" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3GO7VFCZS7-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Chanho Lee RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Chanho Lee Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EFT0SBFJCH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EFT0SBFJCH",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Chanho Lee" href="/en/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/en/projects/rss.xml" title="Chanho Lee Projects RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/projects/atom.xml" title="Chanho Lee Projects Atom Feed">
<link rel="alternate" type="application/json" href="/en/projects/feed.json" title="Chanho Lee Projects JSON Feed">
<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/en/assets/css/styles.8fb09425.css">
<script src="/en/assets/js/runtime~main.44e53de1.js" defer="defer"></script>
<script src="/en/assets/js/main.b1af8369.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo-new.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo-new.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Chanho Lee</b></a><a class="navbar__item navbar__link" href="/en/wiki/introduction">Wiki</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/projects">Projects</a><a class="navbar__item navbar__link" href="/en/blog/archive">Archive</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/projects/optiver-kaggle" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">한국어</a></li><li><a href="/en/projects/optiver-kaggle" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.linkedin.com/in/teddygood/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn Account"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><div style="max-width:800px;margin:0 auto"><h1 style="font-size:3rem;margin-bottom:2rem">Optiver &quot;Trading at the Close&quot; Competition Retrospective</h1><div class="row margin-bottom--lg"><div class="col col--4"><h4 class="text--uppercase" style="margin-bottom:0.25rem;color:var(--ifm-color-emphasis-600);font-size:0.8rem">Role</h4><p style="font-weight:bold;font-size:1.1rem">Data Scientist</p></div><div class="col col--4"><h4 class="text--uppercase" style="margin-bottom:0.25rem;color:var(--ifm-color-emphasis-600);font-size:0.8rem">Timeline</h4><p style="font-weight:bold;font-size:1.1rem">Oct 2023 - Dec 2023</p></div><div class="col col--4"><h4 class="text--uppercase" style="margin-bottom:0.25rem;color:var(--ifm-color-emphasis-600);font-size:0.8rem">Skill</h4><div style="display:flex;gap:0.5rem;flex-wrap:wrap"><span class="badge badge--secondary">Python</span><span class="badge badge--secondary">LightGBM</span><span class="badge badge--secondary">Numba</span><span class="badge badge--secondary">Pandas</span></div></div></div><hr style="margin-bottom:2rem">
<h2 id="motivation">Motivation</h2>
<p>In 2023, while participating in the 4th cohort of the Google ML Bootcamp, one of the completion requirements was to participate in a Kaggle competition. Coincidentally, Optiver was hosting a competition called &quot;Trading at the Close,&quot; and I chose it because although it was a domain completely unrelated to me and unfamiliar at the time, it seemed interesting. My final submission was LightGBM-based code.</p>
<hr>
<h2 id="competition-overview">Competition Overview</h2>
<h3 id="optiver-and-closing-auctions">Optiver and Closing Auctions</h3>
<p>Optiver is a global electronic market maker. They provide liquidity to major exchanges worldwide while trading derivatives, equities, ETFs, bonds, and foreign exchange.</p>
<p>The <strong>Nasdaq Closing Cross</strong> takes place daily during the last 10 minutes of the market (3:50–4:00 PM ET), during which the official closing price for the day is determined. It is a complex period where investors adjust positions, leading to high volatility, and requires simultaneous processing of traditional order book data and auction data.</p>
<h3 id="schedule-and-prize">Schedule and Prize</h3>
<p><img alt="Competition Timeline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA1sAAACGCAYAAAArdJBpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAB7rSURBVHhe7d17UJRngu/xb7ZEjz1Hek6EGimRc4QNKob1MkY0gpeouAmZlNFQE0kyeKFGmTXGO0ZBRzGJlzgmaiJk0UicoLOIOhmJK5gYEaMwRmBVomYbz3IpzKHJbrc1zcH2lOePbrBpwUv0RYy/T1VXwfM87/M2Tdt5fnkuPHb9+vXriIiIiIiIyH31d94FIiIiIiIicu8UtkRERERERAygsCUiIiIiImIAhS0REREREREDKGyJiIiIiIgYQGFLRERERETEAApbIiIiIiIiBlDYEhERERERMYDCloiIiIiIiAEUtkRERERERAygsCUiIiIiImIAhS0REREREREDKGyJiIiIiIgYQGFLRERERETEAApbIiIiIiIiBlDYEhERERERMYDCloiIiIiIiAEUtkRERERERAygsCUiIiIiImIAhS0REREREREDKGyJiIiIiIgYQGFLRERERETEAApbIiIiIiIiBlDYEhERERERMYDCloiIiIiIiAEUtkRERERERAygsCUiIiIiImIAhS0REREREREDKGyJiIiIiIgYQGFLRERERETEAApbIiIiIiIiBlDYEhERERERMYDCloiIiIiIiAEeu379+nXvQkM0VnP0081szSqiuhG6BA4ketrrzI0OoYt3WxERERER6YAasRzdxda0XZysboQuPRkWN5PEV0YS4jGoL9+TxPYiICKed18K8+zgkdI+Ycuygxdj3qL0qncFdB64jM/3TiUEoHoX8VPSsRBM4q7tvBLo3fpHMqpfEREREZFHhb2IZZNeJavCuwIgmLisbN4a5gvA0TlPMPUA8Pw2Lm0a6d34kdEOywjr+HSRO2j5jWP1gSMUFx0hN3UcfsDV0rdYtafO3baRupoaamqsNHr1cm+M6ldERERE5FFQzfYpTUHLj4HTVpGe9iHpqfFE+AFUkBWXxF/s3tc92tohbH3LyVLXV/1mLeOVsED8/QMJe2UrmamTmDx5Ev7UwcnVRE7axLfua96bNJrIqbuoburGXsqni15hbNRoIqNG8+LM9eyxePw2q3cRHzWayKjpfFpexNopE4iMWs3J2/UrIiIiIiK3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5JfEjGjryYuIiDxYClsiIu2s77jh+FWVUXS8DEv3YUSGtKw3m3yh6wASVixl1YqlrFqxgnc3rCHlhR4tG7r5+T0Oly97hKdqKpsPBPTFZIagZ+e5+1rKqtWreX/DjNueDghgO36IIp8oEl4bQuS8ecSSR2rSfs536k1ImzNcXTGZzZibHvfzdEHTECL72Cn6+iKnj5ffPCsoIiLSgShsiYi0t5BnGNP9O7I/+46QUa0co/5kGH0byik8iyusUE72+vSWB0N4CHiqP371x8j6qgqb7TLndx5o3hMGvRjcpyuWr49hM5kxm03YDqezIefiHZ18aA74BSb7RYosTqAXkS8MALsd55NDbhFyGnDYbNiaH447upefny80OHB4V7RgIuLZX+I8m01uK7OCIiIiHYnClohIu3PtPXJee4Ixo5vX+91gHsucuQOo3LnEtedpQRaW4Bgi2jo/PSSOJdNCsX22kTeTN5PbYwLRHt2GTJ9HvOkEyxMTmZowh+VfwZhxA1ssz2vTk3HMeRry3pnD1IRE3th+iZCnBxBQ+glbi9uIRfXHSF2whDeaH9s4492mFUGjhhFUuYvfJfyBwja6BuDJ4Qy2VWMJeIZor1lBERGRjkR/1FhEpANz2mw4TWZutxLPabWBn9l9UMQ5MmdtwTF9K4lDPRs5sDl8MJtv01mrnDhsYPpR195vFWTNX49l3GpSnmslrIqIiHQQClsiIg+72kMsT9mPo380E4easBw+xBFrKAvWziL8jqavHh62kmyyD56isLb3T/LnExGRnxaFLRGRnwJbBUWHj3GmtgFzcBRjxvfHryNMQt1ntgsFnKn1JWjQQIJaOaZeRESkI1HYEhERERERMYAOyBARERERETGAwpaIiIiIiIgBFLZEREREREQMoLAlIiIiIiJiAIUtERERERERAyhsiYiIiIiIGEBhS0RERERExAAKWyIiIiIiIgZQ2BIRERERETGAwpaIiIiIiIgBFLZEREREREQMoLAlIiIiIiJiAIUtERERERERAyhsiYiIiIiIGEBhS0RERERExAAKWyIiIiIiIgb4//lvc3y5S42TAAAAAElFTkSuQmCC" width="859" height="134"></p>
<p>This is a forecasting competition with an active training phase and a second period where models will be run against real market data.</p>
<p><strong>Training Timeline:</strong></p>
<ul>
<li><strong>Sep 20, 2023</strong> - Start Date.</li>
<li><strong>Dec 13, 2023</strong> - Entry Deadline.</li>
<li><strong>Dec 13, 2023</strong> - Team Merger Deadline.</li>
<li><strong>Dec 20, 2023</strong> - Final Submission Deadline.</li>
</ul>
<p>All deadlines are at 11:59 PM UTC.</p>
<p><strong>Forecasting Timeline:</strong>
Selected notebooks are run against real market data with leaderboard updates every two weeks.</p>
<ul>
<li><strong>Mar 20, 2024</strong> - Competition End Date</li>
<li><strong>Total Prize</strong>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo separator="true">,</mo><mn>000</mn><mo stretchy="false">(</mo><mn>1</mn><mi>s</mi><mi>t</mi><mi>P</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">100,000 (1st Place </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">000</span><span class="mopen">(</span><span class="mord">1</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.01968em">tPl</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ce</span></span></span></span>25,000)</li>
</ul>
<p>Unlike typical Kaggle competitions, this was a <strong>forecasting competition</strong> where models were evaluated on actual market data for about 3 months after submission. The leaderboard was updated every two weeks, and the previous day&#x27;s answers were released daily via <code>revealed_targets</code>.</p>
<h3 id="problem-definition">Problem Definition</h3>
<p>The task was to predict price movements 60 seconds into the future during the closing auction period.</p>
<h3 id="target-definition">Target Definition</h3>
<p>The target is the change in the WAP (Weighted Average Price) of an individual stock minus the change in the Index WAP, expressed in basis points (bp, 0.01%):</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>=</mo><mrow><mo fence="true">(</mo><mfrac><mrow><mi>S</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>W</mi><mi>A</mi><msub><mi>P</mi><mrow><mi>t</mi><mo>+</mo><mn>60</mn></mrow></msub></mrow><mrow><mi>S</mi><mi>t</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>W</mi><mi>A</mi><msub><mi>P</mi><mi>t</mi></msub></mrow></mfrac><mo>−</mo><mfrac><mrow><mi>I</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mi>W</mi><mi>A</mi><msub><mi>P</mi><mrow><mi>t</mi><mo>+</mo><mn>60</mn></mrow></msub></mrow><mrow><mi>I</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mi>W</mi><mi>A</mi><msub><mi>P</mi><mi>t</mi></msub></mrow></mfrac><mo fence="true">)</mo></mrow><mo>×</mo><mn>10000</mn></mrow><annotation encoding="application/x-tex">Target = \left( \frac{StockWAP_{t+60}}{StockWAP_t} - \frac{IndexWAP_{t+60}}{IndexWAP_t} \right) \times 10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">St</span><span class="mord mathnormal">oc</span><span class="mord mathnormal" style="margin-right:0.13889em">kW</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">St</span><span class="mord mathnormal">oc</span><span class="mord mathnormal" style="margin-right:0.13889em">kW</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">60</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">60</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">10000</span></span></span></span></span>
<p>In other words, it is a problem of predicting the &quot;relative&quot; price change of an individual stock with the overall market movement removed.</p>
<h3 id="evaluation-metric">Evaluation Metric</h3>
<p>Mean Absolute Error (MAE):</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mi>A</mi><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">∣</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">MAE = \frac{1}{n} \sum_{i=1}^{n} |y_i - x_i|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em"><span style="top:-1.8723em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span></span>
<p>Where:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> is the total number of data points.</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> is the predicted value for data point i.</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> is the observed value for data point i.</li>
</ul>
<h3 id="data-structure">Data Structure</h3>
<p>The training data consists of closing auction snapshots for about 200 stocks over 481 days, totaling about 5 million rows. Key columns are as follows:</p>
<ul>
<li><code>stock_id</code>: Stock unique identifier</li>
<li><code>date_id</code>: Date identifier (sequential)</li>
<li><code>seconds_in_bucket</code>: Seconds elapsed since auction start</li>
<li><code>imbalance_size</code>: Unmatched volume at current reference_price (USD)</li>
<li><code>imbalance_buy_sell_flag</code>: Imbalance direction: 1 (Buy side), -1 (Sell side), 0 (None)</li>
<li><code>reference_price</code>: Price where matched volume is maximized</li>
<li><code>matched_size</code>: Volume matchable at current reference_price (USD)</li>
<li><code>far_price</code> / <code>near_price</code>: Optimal execution price (Auction only / Including continuous orders)</li>
<li><code>bid_price</code> / <code>ask_price</code>: Best bid/ask price in non-auction order book</li>
<li><code>bid_size</code> / <code>ask_size</code>: Volume of best bid/ask (USD)</li>
<li><code>wap</code>: Weighted average price of non-auction order book (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>i</mi><mi>d</mi><mi>P</mi><mo>×</mo><mi>A</mi><mi>s</mi><mi>k</mi><mi>S</mi><mo>+</mo><mi>A</mi><mi>s</mi><mi>k</mi><mi>P</mi><mo>×</mo><mi>B</mi><mi>i</mi><mi>d</mi><mi>S</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>B</mi><mi>i</mi><mi>d</mi><mi>S</mi><mo>+</mo><mi>A</mi><mi>s</mi><mi>k</mi><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">BidP \times AskS + AskP \times BidS) / (BidS + AskS)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">)</span></span></span></span></li>
</ul>
<hr>
<h2 id="my-approach">My Approach</h2>
<h3 id="feature-engineering">Feature Engineering</h3>
<p>I used a total of 124 features in <code>my-submission.ipynb</code>. They can be broadly categorized into five groups:</p>
<p><strong>1. Liquidity/Imbalance Features</strong></p>
<ul>
<li><code>liquidity_imbalance</code>: Order volume imbalance → <code>(bid_size - ask_size) / (bid_size + ask_size)</code></li>
<li><code>matched_imbalance</code>: Matched/Imbalance volume ratio → <code>(imbalance_size - matched_size) / (imbalance_size + matched_size)</code></li>
<li><code>size_imbalance</code>: Simple ratio → <code>bid_size / ask_size</code></li>
<li><code>imbalance_momentum</code>: Time change of <code>imbalance_size</code> per stock divided by <code>matched_size</code></li>
</ul>
<p><strong>2. Price Spread Features</strong></p>
<ul>
<li><code>price_spread</code>: <code>ask_price - bid_price</code></li>
<li><code>spread_intensity</code>: Change in spread per stock</li>
<li><code>price_pressure</code>: <code>imbalance_size * price_spread</code></li>
<li><code>market_urgency</code>: <code>price_spread * liquidity_imbalance</code></li>
</ul>
<p><strong>3. Price Pair/Triplet Ratio Features</strong></p>
<ul>
<li>Imbalance ratios for all pair combinations of 6 prices (<code>reference_price</code>, <code>far_price</code>, <code>near_price</code>, <code>ask_price</code>, <code>bid_price</code>, <code>wap</code>) → <code>(P1 - P2) / (P1 + P2)</code> form</li>
<li>Numba-accelerated triplet imbalance: (max - mid) / (mid - min) ratio of three prices</li>
</ul>
<p><strong>4. Time Series Features</strong></p>
<ul>
<li>1/2/3/10 lags and pct_change for <code>matched_size</code>, <code>imbalance_size</code>, <code>reference_price</code>, <code>imbalance_buy_sell_flag</code></li>
<li>1/2/3/10 diffs for <code>ask_price</code>, <code>bid_price</code>, <code>ask_size</code>, <code>bid_size</code>, <code>market_urgency</code>, <code>imbalance_momentum</code>, <code>size_imbalance</code></li>
</ul>
<p><strong>5. Global Statistics Features</strong></p>
<ul>
<li>Median, std, ptp (peak-to-peak) of <code>bid_size</code>, <code>ask_size</code>, <code>bid_price</code>, <code>ask_price</code> per stock mapped to <code>global_*</code></li>
<li>Time derivatives: <code>dow</code> (day of week), <code>seconds</code>, <code>minute</code></li>
</ul>
<h3 id="model-and-training">Model and Training</h3>
<ul>
<li><strong>Model</strong>: LightGBM (<code>objective=&#x27;mae&#x27;</code>, <strong>Tesla P100 GPU</strong>)</li>
<li><strong>Hyperparameters</strong>: n_estimators=6000, num_leaves=256, max_depth=11, learning_rate=0.00871, subsample=0.6, colsample_bytree=0.8</li>
<li><strong>Validation</strong>: Date-based 5-fold CV, with a 5-day purge gap between folds (to prevent time leakage)</li>
<li><strong>Final Training</strong>: Retrained on full data using the average best_iteration (approx. 5103) of the 5 folds</li>
</ul>
<h3 id="inference">Inference</h3>
<ul>
<li>Mantained a rolling cache of the last 21 rows per stock to generate features</li>
<li>Equal-weight ensemble of 5 fold models</li>
<li><code>zero_sum</code> post-processing: Subtract weighted average from predictions using <strong>square root of volume (bid+ask size)</strong> as weights. This ensures the market-wide sum is zero.</li>
<li>Clipping: Limited to [-64, 64] range</li>
</ul>
<hr>
<h2 id="results">Results</h2>
<table><thead><tr><th>Item</th><th>Value</th></tr></thead><tbody><tr><td>5-fold CV MAE</td><td>5.83 (Per fold: 6.75, 6.12, 5.97, 5.49, 4.80)</td></tr><tr><td>Public/Private LB</td><td>5.4744</td></tr><tr><td>Rank</td><td>981st / 3,225 Teams (Top 30%)</td></tr><tr><td>Runtime</td><td>2h 35m (P100 GPU)</td></tr><tr><td>Inference Speed</td><td>~0.34s per batch</td></tr></tbody></table>
<hr>
<h2 id="comparison-with-top-solutions">Comparison with Top Solutions</h2>
<p>After the competition, I reviewed top solutions to see what I missed.</p>
<h3 id="1st-place--hyd-hydantess">1st Place – HYD (hydantess)</h3>
<ul>
<li><strong>Model</strong>: CatBoost(50%) + GRU(30%) + Transformer(20%) Ensemble</li>
<li><strong>Features</strong>: GRU captured 55-step time-series patterns, Transformer captured cross-sectional relationships among 200 stocks</li>
<li><strong>Online Learning</strong>: Retrained every 12 days (Total 4 times)</li>
<li><strong>Weighted zero_sum</strong>: <code>pred -= (pred * stock_weights).sum() / stock_weights.sum()</code></li>
<li><strong>Sample Weights</strong>: Normalized per-stock volatility with <code>1.0 / (stock_std + 1e-7)</code></li>
</ul>
<h3 id="9th-place--adam-hookman">9th Place – ADAM. (hookman)</h3>
<ul>
<li><strong>Model</strong>: 3× XGBoost (different seeds)</li>
<li><strong>Features</strong>: 157 features, median-scaled volume, MACD, WAP-based target proxy</li>
<li><strong>Data Weights</strong>: 1.5x weight on last 45 days</li>
<li><strong>Online Learning</strong>: Retrained on Day N and Day N+30</li>
</ul>
<h3 id="14th-place--clash-royale-5-person-team">14th Place – Clash Royale (5-person team)</h3>
<ul>
<li><strong>Model</strong>: LightGBM + CatBoost simple average</li>
<li><strong>Features</strong>: 193 features, revealed target lags, RSI/MACD/Bollinger Bands</li>
<li><strong>Online Learning</strong>: Alternating LGB/CAT retraining every 6-9 days</li>
<li><strong>Key Fix</strong>: Fixed leakage in <code>mid_price_movement</code> calculation by grouping by <code>stock_id</code></li>
</ul>
<h3 id="15th-place--o-yuksel-lognorm">15th Place – O Yuksel (lognorm)</h3>
<ul>
<li><strong>Model</strong>: 3× LGB (Offline) + 4× XGB + 1× LGB (Online)</li>
<li><strong>Features</strong>: Revealed target, relative performance vs. market/sector, behavior-based embeddings instead of stock_id</li>
<li><strong>Post-processing</strong>: Subtracted index-weighted mean instead of simple zero-sum</li>
</ul>
<h3 id="common-themes-and-what-i-missed">Common Themes and What I Missed</h3>
<table><thead><tr><th>Top Solution Feature</th><th>My Solution</th></tr></thead><tbody><tr><td><strong>Online Learning</strong> (Retrain every 6~30 days)</td><td>Trained once and fixed</td></tr><tr><td><strong>Multi-Model Ensemble</strong> (LGB+CAT+XGB or +GRU/Transformer)</td><td>LightGBM Single</td></tr><tr><td><strong>Per-Stock Scaling</strong> (stock_std, median)</td><td>used Global statistics only</td></tr><tr><td><strong>Weighted zero_sum</strong></td><td>Used simple volume sqrt weights</td></tr><tr><td><strong>Revealed Target Features</strong></td><td>Not used</td></tr><tr><td><strong>Seed Diversity</strong> (3+ same models)</td><td>5-fold ensemble only</td></tr></tbody></table>
<hr>
<h2 id="retrospective">Retrospective</h2>
<h3 id="what-went-well">What Went Well</h3>
<ul>
<li>Accelerated triplet imbalance calculation with Numba to reduce feature generation time</li>
<li>Prevented time leakage with date-based purge gap</li>
<li>Ran stably in Kaggle environment thanks to memory downcasting</li>
</ul>
<h3 id="what-could-be-improved">What Could Be Improved</h3>
<ul>
<li><strong>Did not use Online Learning.</strong> The competition API provided the <strong>previous day&#x27;s target (<code>revealed_targets</code>)</strong> at the start of each day. Top rankers did not discard this data but periodically retrained models to reflect the latest market trends. I trained the model once and left it for 3 months, failing to adapt to drift.</li>
<li><strong>Did not use Sequence Models.</strong> The 1st place solution used GRU for temporal order and Transformer for cross-stock relationships. Tree models alone likely struggled to capture these structural patterns.</li>
<li><strong>Lack of Per-Stock Normalization.</strong> Scaling by stock_std or median could have corrected for volatility differences between stocks.</li>
<li><strong>Persistence:</strong> Since this project was for completing the Google ML Bootcamp, I didn&#x27;t persist until the very end of the competition. I wonder if I could have gotten a higher score if I had put in a bit more effort.</li>
</ul>
<hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/hyd-1st-place-solution">1st place – HYD</a></li>
<li><a href="https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/adam-9th-place-solution">9th place – ADAM.</a></li>
<li><a href="https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/clash-royale-14th-place-solution-for-the-optiver-t">14th place – Clash Royale</a></li>
<li><a href="https://www.kaggle.com/competitions/optiver-trading-at-the-close/writeups/o-yuksel-15th-place-solution">15th place – O Yuksel</a></li>
<li><a href="https://www.kaggle.com/competitions/optiver-trading-at-the-close/data">Kaggle Data Page</a></li>
</ul></div></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#competition-overview" class="table-of-contents__link toc-highlight">Competition Overview</a><ul><li><a href="#optiver-and-closing-auctions" class="table-of-contents__link toc-highlight">Optiver and Closing Auctions</a></li><li><a href="#schedule-and-prize" class="table-of-contents__link toc-highlight">Schedule and Prize</a></li><li><a href="#problem-definition" class="table-of-contents__link toc-highlight">Problem Definition</a></li><li><a href="#target-definition" class="table-of-contents__link toc-highlight">Target Definition</a></li><li><a href="#evaluation-metric" class="table-of-contents__link toc-highlight">Evaluation Metric</a></li><li><a href="#data-structure" class="table-of-contents__link toc-highlight">Data Structure</a></li></ul></li><li><a href="#my-approach" class="table-of-contents__link toc-highlight">My Approach</a><ul><li><a href="#feature-engineering" class="table-of-contents__link toc-highlight">Feature Engineering</a></li><li><a href="#model-and-training" class="table-of-contents__link toc-highlight">Model and Training</a></li><li><a href="#inference" class="table-of-contents__link toc-highlight">Inference</a></li></ul></li><li><a href="#results" class="table-of-contents__link toc-highlight">Results</a></li><li><a href="#comparison-with-top-solutions" class="table-of-contents__link toc-highlight">Comparison with Top Solutions</a><ul><li><a href="#1st-place--hyd-hydantess" class="table-of-contents__link toc-highlight">1st Place – HYD (hydantess)</a></li><li><a href="#9th-place--adam-hookman" class="table-of-contents__link toc-highlight">9th Place – ADAM. (hookman)</a></li><li><a href="#14th-place--clash-royale-5-person-team" class="table-of-contents__link toc-highlight">14th Place – Clash Royale (5-person team)</a></li><li><a href="#15th-place--o-yuksel-lognorm" class="table-of-contents__link toc-highlight">15th Place – O Yuksel (lognorm)</a></li><li><a href="#common-themes-and-what-i-missed" class="table-of-contents__link toc-highlight">Common Themes and What I Missed</a></li></ul></li><li><a href="#retrospective" class="table-of-contents__link toc-highlight">Retrospective</a><ul><li><a href="#what-went-well" class="table-of-contents__link toc-highlight">What Went Well</a></li><li><a href="#what-could-be-improved" class="table-of-contents__link toc-highlight">What Could Be Improved</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></div></div>
</body>
</html>