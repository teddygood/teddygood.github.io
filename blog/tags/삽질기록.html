<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">&quot;삽질기록&quot; 태그로 연결된 5개 게시물개의 게시물이 있습니다. @ teddygood</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://teddygood.github.io//blog/tags/삽질기록"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" property="og:title" content="&quot;삽질기록&quot; 태그로 연결된 5개 게시물개의 게시물이 있습니다. @ teddygood"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://teddygood.github.io//blog/tags/삽질기록"><link data-rh="true" rel="alternate" href="https://teddygood.github.io//blog/tags/삽질기록" hreflang="ko"><link data-rh="true" rel="alternate" href="https://teddygood.github.io//blog/tags/삽질기록" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://VI4M53X9CF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="teddygood RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="teddygood Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EFT0SBFJCH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EFT0SBFJCH",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="teddygood" href="/opensearch.xml">
<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.6b26b986.css">
<link rel="preload" href="/assets/js/runtime~main.9a1cf066.js" as="script">
<link rel="preload" href="/assets/js/main.f10ed286.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a href="#" class="skipToContent_fXgn">본문으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Chanho Lee</b></a><a class="navbar__item navbar__link" href="/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/blog/archive">Archive</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/tags">Tags</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.linkedin.com/in/teddygood/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn Account"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="검색"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">검색</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/review/ML-in-practice">데싸노트의 실전에서 통하는 머신러닝</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/review/computer-structure-and-OS-to-study-alone">혼자 공부하는 컴퓨터 구조+운영체제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python/Jupyter-lab-tcgetpgrp-failed">WSL2에서 Jupyter Lab 실행 문제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python/django-port-is-already-in-use">프로세스 강제 종료하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/review/Git-GitHub-introduction">박미정의 깃&amp;깃허브 입문</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/review/python-backend-flask">깔끔한 파이썬 탄탄한 백엔드</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python/AttributeError-str-decode">PyJWT 레거시 코드 수정</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python/python-lib-cryptography">Alpine Linux와 crpytography의 호환성 문제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python/pycharm-reformat-code">PyCharm을 정렬해준 이상한 코드</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>&quot;삽질기록&quot; 태그로 연결된 5개 게시물개의 게시물이 있습니다.</h1><a href="/blog/tags">모든 태그 보기</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/python/Jupyter-lab-tcgetpgrp-failed">WSL2에서 Jupyter Lab 실행 문제</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-07-16T00:00:00.000Z" itemprop="datePublished">2022년 7월 16일</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/teddygood.png" alt="Chanho Lee"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chanho Lee</span></a></div><small class="avatar__subtitle" itemprop="description">다양한 분야를 공부하는 것이 좋은 학생</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제">문제<a class="hash-link" href="#문제" title="제목으로 바로 가기">​</a></h2><p>보통 주피터 노트북 또는 주피터 랩을 사용할 때 <code>jupyter notebook</code> 또는 <code>jupyter lab</code>이라는 명령어를 치고 들어간다. 보통은 브라우저와 함께 주피터가 실행되는데 브라우저가 열리지도 않고 주피터가 실행됐는지도 모르는 문제를 만났다.</p><p><img loading="lazy" alt="문제" src="/assets/images/tcgetpgrp-failed-850d81b9688d88fbfec4ab88ae212f7b.png" width="763" height="110" class="img_ev3q"></p><p>WSL에서 Jupyter Lab을 실행시키면 위의 에러 문장이 1초도 안 되게 빠르게 사라지고 갑자기 터미널이 clear되는 상황이다. Jupyter 서버가 돌아가고 있는지도 알 수가 없었다. </p><p><img loading="lazy" alt="주피터 로그인" src="/assets/images/jupyter-login-c2a1493dc87bcf80f39ddb6de2a4027b.png" width="560" height="859" class="img_ev3q"></p><p>혹시나 서버가 작동하고 있는 것일 수도 있으니 Jupyter 주소인 <code>localhost:8888</code>에 접속해봤다. 서버는 제대로 작동하고 있는 것을 확인. 근데 문제는 토큰 값을 모른다는 것이다. 보통 Jupyter를 실행시킬 때 터미널에서 토큰을 출력시켜 보여준다. 우리는 그걸 복사, 붙여넣기를 하면 된다. 그러나 지금 상황은 터미널 조차도 clear되어 있으므로 토큰 값을 모른다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결-방법-1">해결 방법 1<a class="hash-link" href="#해결-방법-1" title="제목으로 바로 가기">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">jupyter server list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>가장 쉬운 방법은 터미널을 한 개 더 열어서 위의 명령어를 누른 후, 토큰 값을 확인하여 주피터 랩에 접속하면 된다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결-방법-2">해결 방법 2<a class="hash-link" href="#해결-방법-2" title="제목으로 바로 가기">​</a></h2><p>근데 위의 방법으로 쓰면 솔직히 너무 불편하고 왜 저런 문제가 생겼는지 궁금하여 stackoverflow에서 검색을 좀 해봤다. 정확한 원인은 모르겠으나 다른 해결 방법 하나를 알 수 있었다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">jupyter lab --no-browser</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>간단하다. 그냥 위의 명령어를 실행시키면 된다. 주피터를 실행될 때 같이 켜지는 브라우저를 사용하지 않겠다는 의미이다.</p><p>그럼 어떻게 주피터에 접속해야 하는가?  </p><p>주소는 주피터를 실행시키면 터미널에 나온다. 즉, 우리가 직접 브라우저를 켜서 주소를 입력하면 된다. </p><p><img loading="lazy" alt="주피터 랩" src="/assets/images/jupyter-lab-1c41fd1ae8a79968675ff33206860ac7.png" width="1920" height="929" class="img_ev3q"></p><p>그럼 위와 같이 제대로 사이트에 접속할 수 있게 된다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a class="hash-link" href="#appendix" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="주피터 랩" src="/assets/images/github-issue-jupyter-0ec4b2d9e79e4de483d1e0f2fa7f261d.png" width="1152" height="484" class="img_ev3q"></p><p>GitHub에 있는 <a href="https://github.com/jupyterlab/jupyterlab/issues/10413" target="_blank" rel="noopener noreferrer">jupyter lab Repo의 issue</a>를 확인하니 나랑 같은 문제를 접한 사람이 있었고 누군가의 답변을 확인할 수 있었다. 그의 답변을 대충 요약하면 주피터랑은 관련이 없으며 WSL과 관련이 있다고 한다. </p><p>대략적으로 예상해보면 아마 WSL은 CLI로 이루어진 환경이라 브라우저가 없으니 거기서 브라우저를 작동시키려고 할 때 문제가 생길 수 있다고 생각한다. </p><p>더 생각해보면 WSL 자체가 애초에 가상환경이라 거기서 작동시켜 실제 환경의 브라우저를 여는 것이 문제가 있을 수도 있다고 생각이 든다. </p><p>근데 그렇기에는 WSL에서 VS Code는 너무 잘 작동이 되는데? 진짜 이유를 모르겠다.</p><p>어쨌든 나는 1번 방법은 귀찮으니 WSL에서 Jupyter를 사용할 경우에는 아마 2번 방법을 사용하지 않을까 싶다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="제목으로 바로 가기">​</a></h2><blockquote><ul><li><a href="https://stackoverflow.com/questions/50882266/using-jupyter-with-windows-subsystem-for-linux" target="_blank" rel="noopener noreferrer">stackoverflow</a></li><li><a href="https://github.com/jupyterlab/jupyterlab/issues/10413" target="_blank" rel="noopener noreferrer">jupyterlab repo issue</a></li></ul></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/삽질기록">삽질기록</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/python/django-port-is-already-in-use">프로세스 강제 종료하기</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-03-07T00:00:00.000Z" itemprop="datePublished">2022년 3월 7일</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/teddygood.png" alt="Chanho Lee"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chanho Lee</span></a></div><small class="avatar__subtitle" itemprop="description">다양한 분야를 공부하는 것이 좋은 학생</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="사건">사건<a class="hash-link" href="#사건" title="제목으로 바로 가기">​</a></h2><p>django를 시작하고 종료할 때 <code>Ctrl-C</code>를 사용해서 꺼야 했는데 <code>Ctrl-Z</code>를 사용했다.
종료가 제대로 된 줄 알았지만, 프로세스가 중단된 것이었다.</p><p><img loading="lazy" alt="port-error-image" src="/assets/images/port-error-message-41c3a8bf0118f4960204e109ed6ff635.jpg" width="616" height="43" class="img_ev3q">  </p><p>결국 위의 <code>Error: That port is already in use.</code>라는 에러가 발생했다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a class="hash-link" href="#해결" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="ps" src="/assets/images/python-ps-e524765dbf8864e898d7b4f6aae9e9f1.jpg" width="474" height="161" class="img_ev3q">  </p><p>대충 프로세스를 종료하면 되지 않을까 생각했고, <code>ps</code> 명령어를 사용해봤으나 역시 어떤 PID가 장고 프로세스인지 알아볼 수 없었다.</p><p>결국 스택오버플로우에 냅다 검색해버렸다.(Reference 참고)<br>
<!-- -->역시 StackOverFlow는 정답을 알려줬다.(스택오버플로우는 신이야!)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">lsof</span><span class="token plain"> -t -i tcp:8000 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">xargs</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">kill</span><span class="token plain"> -9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위의 명령어를 사용하면 해결이 된다.</p><p>간단하게 정리하자면 <code>lsof</code>는 시스템에 열려있는 파일에 대한 정보를 출력하는 명령어다.
여기서 사용한 <code>-i</code> 옵션은 열려있는 네트워크 포트 정보를 확인하는 것이고, <code>-t</code> 옵션은 그 중 PID만 출력한다는 것이다.</p><p><code>xargs</code>는 파이프 이전의 명령을 인자로 받아 다음 명령을 실행할 때 주로 사용한다.  </p><p><code>kill -9</code>는 유명해서 다들 아시겠지만 SIGNAL 리스트 중 <code>SIGKILL</code>의 번호를 옵션으로 사용한 것이다.</p><p>명령어는 우분투 환경에서 사용했지만, 맥에서도 돌아간다고 한다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="제목으로 바로 가기">​</a></h2><blockquote><ul><li><a href="https://stackoverflow.com/questions/20239232/django-server-error-port-is-already-in-use" target="_blank" rel="noopener noreferrer">stackoverflow</a> </li><li><a href="https://ghostweb.tistory.com/828" target="_blank" rel="noopener noreferrer">Ubuntu 프로세스 강제 종료시키기</a></li><li><a href="https://dev.plusblog.co.kr/44" target="_blank" rel="noopener noreferrer">lsof 명령어 사용법</a></li><li><a href="https://inpa.tistory.com/entry/LINUX-%F0%9F%93%9A-xargs-%EB%AA%85%EB%A0%B9-%ED%8C%8C%EC%9D%B4%ED%94%84-%EC%99%80-%EC%B0%A8%EC%9D%B4%EC%A0%90-%EC%99%84%EB%B2%BD-%EC%A0%95%EB%A6%AC-%ED%91%9C%EC%A4%80%EC%9E%85%EB%A0%A5-%EC%9D%B8%EC%9E%90-%EC%B0%A8%EC%9D%B4#top" target="_blank" rel="noopener noreferrer">xargs 명령 &amp; 파이프 와 차이점 완벽 정리 (표준입력 / 인자 차이)</a></li></ul></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/삽질기록">삽질기록</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/python/AttributeError-str-decode">PyJWT 레거시 코드 수정</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-06-02T00:00:00.000Z" itemprop="datePublished">2021년 6월 2일</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/teddygood.png" alt="Chanho Lee"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chanho Lee</span></a></div><small class="avatar__subtitle" itemprop="description">다양한 분야를 공부하는 것이 좋은 학생</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="decode-에러">decode 에러<a class="hash-link" href="#decode-에러" title="제목으로 바로 가기">​</a></h2><p>PyJWT를 활용하여 JWT를 만들고 있었는데 분명히 책에서 따라한 코드가 맞는데 에러가 떴다.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">token </span><span class="token operator">=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;JWT_SECRET_KEY&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;HS256&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> jsonify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;access_token&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;UTF-8&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">AttributeError: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;str&#x27;</span><span class="token plain"> object has no attribute </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;decode&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&quot;뭐지?&quot;라고 생각하면서 일단 코드를 잘못 썼을 수도 있으니 책에서 주어진 코드를 복붙했다. 그래도 에러는 다시 나타났다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a class="hash-link" href="#해결" title="제목으로 바로 가기">​</a></h2><p>에러가 다시 나타나니 방법은 구글링 밖에 없었다. 바로 stackoverflow가 뜨길래 해결은 깔끔하게 됐다.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">token </span><span class="token operator">=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;JWT_SECRET_KEY&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;HS256&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> jsonify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;access_token&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그냥 decode를 지워주면 되는 문제였다. 근데 &#x27;왜 decode가 붙어있던걸까?&#x27;라는 의문이 들었고 stackoverflow를 계속 탐험했다.</p><p><img loading="lazy" alt="pyjwt-version-stackoverflow" src="/assets/images/pyjwt-version-stackoverflow-ef060e95bc786a79981e87bf213108db.jpg" width="922" height="429" class="img_ev3q"></p><p>대충 버전과 관련있어 보이는 답변을 발견했고, 바로 공식문서를 읽어보는 방법을 선택했다. 현재 내가 쓰고 있는 버전은 2.1.0으로 가장 최근 버전이다. 저 코드가 레거시 코드라는 예상을 해보고 PyJWT 공식 문서의 Changelog를 읽어봤다.</p><p><img loading="lazy" alt="jwt-encode-return-type" src="/assets/images/jwt-encode-return-type-b354f6e5bb4efc9de039c9466d24227e.jpg" width="396" height="94" class="img_ev3q"></p><p>역시나 내 예상은 맞았다. v2.0.0으로 바뀌면서 <code>jwt.encode(...)</code>의 return type이 바뀌었다는 것. 예전에는 토큰의 타입을 byte string으로 return했었던 것 같다. 현재는 str 타입으로 return되고 파이썬에서 모든 문자열은 UTF-8이므로 딱히 저걸 decode할 필요가 없다는 의미이다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="느낀점">느낀점<a class="hash-link" href="#느낀점" title="제목으로 바로 가기">​</a></h2><p>역시 책을 읽으면서 공부하는 방법도 장점만 있는 것이 아니다. 얼마나 오래 됐느냐에 따라서 레거시 코드가 존재할 수도 있다. 책으로 공부하려면 가장 최근에 나온 책을 먼저 읽어보는 것이 좋을듯하다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="제목으로 바로 가기">​</a></h2><blockquote><ul><li><a href="https://stackoverflow.com/questions/50979667/python-attributeerror-str-object-has-no-attribute-decode" target="_blank" rel="noopener noreferrer">stackoverflow</a> </li><li><a href="https://stackoverflow.com/questions/65798281/attributeerror-str-object-has-no-attribute-decode-python-error/66065560#66065560" target="_blank" rel="noopener noreferrer">stackoverflow</a></li><li><a href="https://pyjwt.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener noreferrer">PyJWT</a></li></ul></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/삽질기록">삽질기록</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/python/python-lib-cryptography">Alpine Linux와 crpytography의 호환성 문제</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-06-02T00:00:00.000Z" itemprop="datePublished">2021년 6월 2일</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/teddygood.png" alt="Chanho Lee"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chanho Lee</span></a></div><small class="avatar__subtitle" itemprop="description">다양한 분야를 공부하는 것이 좋은 학생</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alpine-linux와-cryptography의-호환성-문제">Alpine Linux와 cryptography의 호환성 문제<a class="hash-link" href="#alpine-linux와-cryptography의-호환성-문제" title="제목으로 바로 가기">​</a></h2><p>Django 블로그 프로젝트를 docker로 옮기는 도중 에러가 떴다. alpine linux와 python에서 암호화 알고리즘이 구현된 패키지인 cryptography의 호환성 문제였다. </p><div class="language-Dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM python:3.8-alpine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">cryptography</span><span class="token operator">==</span><span class="token number">3.4</span><span class="token plain">.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>현재 Dockerfile에서 사용하는 image 버전과 requirements.txt에 적힌 cryptography 버전은 위와 같다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERROR: No matching distribution found for cryptography==3.4.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Dockerfile</code>, <code>docker-compose.yml</code>을 다 만들고 난 후에 마지막으로 위의 명령어로 빌드를 하던 중 위의 Error를 만났다. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="첫-번째-문제-해결">첫 번째 문제 해결<a class="hash-link" href="#첫-번째-문제-해결" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="crypto-doc" src="/assets/images/cryptography-doc-7920a97dd96ca33edacacfbb8e6f2c1b.jpg" width="748" height="503" class="img_ev3q"></p><p>아무리 구글링을 해도 찾지를 못 해서 공식 문서를 보기로 결정했고 어느정도 해결책을 찾았다.</p><p>대략 요약하면 cryptography 패키지는 Rust를 사용하기에 Rust compiler도 같이 다운로드 해야지 돌아간다는 것이다. Rust는 cryptography를 빌드할 때 필요하며 stackoverflow에서 참고한 답변에서는 rust 설치를 스킵하는 명령어를 추가하는 방법도 알 수 있었다.</p><div class="language-Dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ENV CRYPTOGRAPHY_DONT_BUILD_RUST=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>multi-stage를 사용하여 빌드하라고 한다. 물론 multi-stage를 사용하면 이미지를 경량화하는 것도 좋은 방법이지만 도커를 자세히 배운 사람이 아니라 잘 모르기 때문에 이 방법은 패스했다. </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apk </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> gcc musl-dev python3-dev libffi-dev openssl-dev cargo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위의 명령어를 Dockerfile에 추가하면서 첫 번째 문제는 끝났다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="빌드가-오래-걸리는-문제">빌드가 오래 걸리는 문제<a class="hash-link" href="#빌드가-오래-걸리는-문제" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="더 상세한 details" src="/assets/images/crypto-building-error-d1fd632da6ad156fe5b2992ae3ad5b27.jpg" width="727" height="109" class="img_ev3q"></p><p>위의 명령어를 Dockerfile에 추가하고 다시 build 하니 위와 같이 에러 아닌 에러가 떴다. 이미지를 보면 알 수 있듯이 still running이 지속되는 상황이다. 대략 10분 정도 그대로 놔뒀는데도 빌드가 안 되는 상황이다.</p><p><img loading="lazy" alt="더 상세한 details" src="/assets/images/alpine-linux-build-issue-18101324b11176113bb1b45925f4cb06.jpg" width="1019" height="833" class="img_ev3q"></p><p>cryptography GitHub 저장소에서 가져온 이슈 이미지다. 현재의 상황과 같길래 답변을 참고하려 했으나 내 지식으로는 이해 불가였다. 대략 요약하자면 파이썬 패키지 포맷과 관련된 답변과 alpine linux에 대해 공식 문서로 잘 정리되어 있다는 내용이다. 결론적으로는 도움이 안 됐지만, 혹시 저 답변으로 해결할 수 있는 분이 있을 수 있기에 가져와봤다.</p><p>현 시점의 문제는 빌드가 오래 걸린다는 것이다. 이 문제를 해결하기 위해 다시 구글링을 하면서 도커에 대해 공부하게 됐고, 파이썬 환경에서 도커를 이용할 때 어떤 OS를 사용하는 것이 더 유리한 가에 대해 공부했다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="두-번째-문제-해결">두 번째 문제 해결<a class="hash-link" href="#두-번째-문제-해결" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="alpine-linux가-파이썬-환경에서-적절하지-않은-이유">alpine linux가 파이썬 환경에서 적절하지 않은 이유<a class="hash-link" href="#alpine-linux가-파이썬-환경에서-적절하지-않은-이유" title="제목으로 바로 가기">​</a></h3><p>대부분의 사람들이 도커를 처음 사용할 때 alpine linux로 사용하는데 그 이유는 Ubuntu linux와 비교했을 때 용량도 작고 빌드할 때 더 빠르기 때문이다. 그러나 python 환경에서는 적절하지 않다.</p><p>그 이유는 사용하는 라이브러리의 차이에서 시작된다. 대부분의 리눅스 배포판은 파이썬을 포함한 모든 C언어 프로그램에 필요한 C언어 표준 라이브러리인 GNU 라이브러리(glibc)를 사용한다. 그러나 Alpine Linux는 좀 더 경량화하기 위하여 GNU 라이브러리를 사용하는 것이 아니라 musl 라이브러리를 사용한다. 이 musl 라이브러리는 GNU 라이브러리로 컴파일 된 <code>Wheel 바이너리</code>를 지원하지 않는다. 그렇기 때문에 <code>.whl</code> 확장자를 갖는 패키지를 다운 받는 것이 아니라 <code>.tar.gz</code> 확장자 파일을 다운 받게 된다. 그렇기 때문에 alpine linux를 사용하는 경우 사용하는 모든 파이썬 패키지의 C코드를 컴파일 해야 하므로 빌드 시간도 오래 걸리며 용량도 커진다는 것이다. </p><p>최근 대부분의 파이썬 패키지에는 PyPI의 Wheel 바이너리가 포함되어 있어 설치 시간이 빠르다. Wheel은 사실 .whl 확장자와 특별한 형식의 파일 이름으로 이루어진 ZIP 형식을 아카이브한 것이다. 쉽게 말하면 확장자만 바꾼 것이다.</p><ol><li>빌드가 느리다.</li><li>이미지 용량이 커진다.</li><li>시간이 많이 낭비된다.(빌드하는 과정)</li><li>런타임 버그들을 만날 수 있다.</li></ol><p>간단하게 요약하자면 위의 이유들이 Alpine Linux가 python 환경에서 적절하지 않은 이유이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그럼-어떤-os를-사용해야-할까">그럼 어떤 OS를 사용해야 할까?<a class="hash-link" href="#그럼-어떤-os를-사용해야-할까" title="제목으로 바로 가기">​</a></h3><p>성능에 관심 있으면 ubuntu, 가볍게 도커를 시작해보려면 alpine이 좋겠지만 현재 나는 파이썬 환경에서 도커를 사용해보려 하니 Debian buster를 기반으로 한 3.8-slim-buster를 사용한다.</p><div class="language-Dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN apk update \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; apk add postgresql-dev gcc python3-dev musl-dev zlib-dev jpeg-dev libffi-dev openssl-dev cargo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-Dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM python:3.8-slim-buster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위의 apk로 패키지 설치한 부분의 명령어를 지우고, slim-buster로 바꿔준다.</p><p>이후 다시 build 했을 때 잘 되는 모습을 확인할 수 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="제목으로 바로 가기">​</a></h2><blockquote><ul><li><a href="https://cryptography.io/en/latest/installation/" target="_blank" rel="noopener noreferrer">Cryptography installation</a></li><li><a href="https://github.com/pyca/cryptography/issues/5776" target="_blank" rel="noopener noreferrer">Dependencies to build on Alpine Linux?</a></li><li><a href="https://jonnung.dev/docker/2020/04/08/optimizing-docker-images/" target="_blank" rel="noopener noreferrer">도커 이미지 잘 만드는 방법</a></li><li><a href="https://pythonspeed.com/articles/alpine-docker-python/" target="_blank" rel="noopener noreferrer">Using Alpine can make Python Docker builds 50x slower</a></li><li><a href="https://pythonspeed.com/articles/base-image-python-docker-images/" target="_blank" rel="noopener noreferrer">The best Dockeer base image for Python application</a></li></ul></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/삽질기록">삽질기록</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/python/pycharm-reformat-code">PyCharm을 정렬해준 이상한 코드</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-05-23T00:00:00.000Z" itemprop="datePublished">2021년 5월 23일</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/teddygood.png" alt="Chanho Lee"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/teddygood" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chanho Lee</span></a></div><small class="avatar__subtitle" itemprop="description">다양한 분야를 공부하는 것이 좋은 학생</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제">문제<a class="hash-link" href="#문제" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="파이참 HTML 코드" src="/assets/images/pycharm-html-code-277e0106fd1014aa976433f5a291c07e.jpg" width="926" height="117" class="img_ev3q">  </p><p>django 공부를 하던 도중 테스트 코드를 수정하게 되고 그에 맞춰 base.html 코드도 수정할 필요가 있었다. 위와 같이 코드를 적었고, 위의 코드는 현재 들여쓰기가 엄청 많이 사용된 상황. 작은 모니터를 쓰던 난 당연히 Ctrl+Alt+l을 눌렀다. (Ctrl+Alt+l은 Pycharm의 Reformat and rearrange code이다.)</p><p><img loading="lazy" alt="정렬된 코드 1" src="/assets/images/pycharm-reformat-code-1-94ead47b437cb9ea2a6e4e65af2bdae1.jpg" width="519" height="144" class="img_ev3q">  </p><p>위와 같이 정렬된 것을 보고 &quot;잘 됐네&quot;라고 생각하면서 아무런 의심 없이 지나갔었다. 그 후 처음 테스트를 할 때는 무슨 문제가 있나 생각했지만, 점점 테스트를 할 때마다 FAIL이 뜨는 것을 보며 정신 나갈 거 같았다.</p><p><img loading="lazy" alt="점심 나가서 먹을 거 같아" src="/assets/images/my-code-doesnt-work-d8f0cee224309c4fb230a4a1fd5aa865.jpg" width="458" height="698" class="img_ev3q">  </p><p>진짜 딱 저 유머였다. 자꾸 &quot;아니, 이게 왜 안 돼?&quot;라는 생각만 들면서 테스트 코드도 갈아엎고 html 코드도 읽어보면서 어디가 잘못 됐나 계속 찾아봤다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a class="hash-link" href="#해결" title="제목으로 바로 가기">​</a></h2><p>1시간이 지난 후에야 <code>&lt;a&gt;</code>태그가 중간에 나눠진 것을 확인하였고 &#x27;에이, 설마&#x27;라는 생각에 가장 처음의 코드로 고쳤는데 됐다.</p><p>괄호들을 너무 많이 써서 저렇게 정렬된 것을 못 찾고 있던 것이다. 처음 코드로 고치니 잘 돌아가더라...</p><p><img loading="lazy" alt="정렬된 코드 2" src="/assets/images/pycharm-reformat-code-2-dc7901a6e3d6acd07e380192c21d26ee.jpg" width="442" height="170" class="img_ev3q">  </p><p>위와 같이 코드를 써도 잘 돌아간다. <code>&lt;a&gt;</code> 태그 안의 내용이 나눠진 채로 정렬되니 이런 문제가 생긴 것이다. </p><p>IDLE가 긴 코드들을 알아서 잘 정리해줄 줄 알았는데 그게 아니었다. IDLE를 너무 믿었나. 예전에 Visual Studio에서도 이런 실수를 한 적이 있었는데, 조심할 필요가 있는 것 같다. 교수님들도 항상 IDLE를 너무 믿지 말라고 하셨는데 그 말이 갑자기 생각난다.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/삽질기록">삽질기록</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="블로그 게시물 목록 탐색"></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.9a1cf066.js"></script>
<script src="/assets/js/main.f10ed286.js"></script>
</body>
</html>